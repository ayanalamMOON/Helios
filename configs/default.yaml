atlas:
  data_dir: "/var/lib/helios"
  aof_fsync: "every"     # options: "every", "interval", "none"
  snapshot_interval_cmds: 10000
  snapshot_interval_time: "5m"

  # Raft consensus configuration (for multi-node clusters)
  raft:
    enabled: false                    # Enable Raft replication
    node_id: "node-1"                # Unique node identifier
    bind_addr: "127.0.0.1:7000"      # Raft RPC listen address
    data_dir: "/var/lib/helios/raft" # Raft data directory (logs, snapshots)
    heartbeat_timeout: "100ms"       # Leader heartbeat interval
    election_timeout: "500ms"        # Follower election timeout base
    snapshot_threshold: 10000        # Commands before triggering snapshot

    # Peer nodes in the cluster (excluding this node)
    peers:
      # - id: "node-2"
      #   address: "127.0.0.1:7001"
      # - id: "node-3"
      #   address: "127.0.0.1:7002"

gateway:
  listen: ":8443"
  tls_enabled: false
  tls_cert: "/etc/helios/cert.pem"
  tls_key: "/etc/helios/key.pem"
  jwt_secret: "change-this-in-production"
  jwt_expiry: "15m"
  rate_limit:
    default_capacity: 100
    default_rate_num: 1
    default_rate_den: 1

proxy:
  listen: ":8080"
  health_check_interval: "5s"
  circuit_breaker:
    failure_threshold: 5
    cooldown_sec: 60

worker:
  poll_interval: "5s"
  max_attempts: 3
  visibility_timeout: 300  # seconds

observability:
  log_level: "info"  # debug, info, warn, error, fatal
  metrics_enabled: true
  metrics_port: ":9090"
  tracing_enabled: false
  tracing_endpoint: "http://localhost:14268/api/traces"

# Horizontal sharding configuration (for large-scale deployments)
sharding:
  enabled: false                    # Enable horizontal sharding
  virtual_nodes: 150                # Virtual nodes per physical node (higher = better distribution)
  replication_factor: 1             # Number of replicas per key (1 = no replication)
  migration_rate: 1000              # Keys per second during migration
  auto_rebalance: false             # Automatically rebalance when nodes added/removed
  rebalance_interval: "1h"          # How often to check for rebalancing needs

# GraphQL API configuration
graphql:
  enabled: true                     # Enable GraphQL API endpoint
  endpoint: "/graphql"              # GraphQL API endpoint path
  playground_enabled: true          # Enable GraphQL Playground UI
  playground_endpoint: "/graphql/playground"  # Playground UI endpoint path
  introspection_enabled: true       # Enable schema introspection (disable in production)
  max_query_depth: 10               # Maximum query nesting depth
  max_complexity: 1000              # Maximum query complexity score
  allowed_origins:                  # CORS allowed origins
    - "*"                           # Allow all origins (restrict in production)

